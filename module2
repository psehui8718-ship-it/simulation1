import streamlit as st
import numpy as np
import plotly.express as px

def run():
    st.subheader("ğŸŒ¡ ì—´ìˆ˜ë ¥ ì‹œë®¬ë ˆì´ì…˜ (Thermal-Hydraulics)")
    st.write("ëƒ‰ê°ì¬ ìœ ëŸ‰ì— ë”°ë¥¸ ì—°ë£Œ ì˜¨ë„ ë¶„í¬ ë³€í™”ë¥¼ ë‹¨ìˆœ ëª¨ë¸ë¡œ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.")

    flow_rate = st.slider("ëƒ‰ê°ì¬ ìœ ëŸ‰ (kg/s)", 100, 1000, 500, 50)
    power = st.slider("ì¶œë ¥ (MW)", 1000, 4000, 2800, 100)

    temp_core = 300 + (power / flow_rate) * 2.5
    st.metric(label="í‰ê·  ì—°ë£Œ ì˜¨ë„ (Â°C)", value=f"{temp_core:.2f}")

    z = np.linspace(0, 4, 100)  # ë…¸ì‹¬ ë†’ì´ (m)
    temp_profile = temp_core + 10 * np.sin(z * np.pi / 4)

    fig = px.line(x=z, y=temp_profile, title="ë…¸ì‹¬ ë‚´ ì˜¨ë„ ë¶„í¬", labels={'x':'ë†’ì´ (m)', 'y':'ì˜¨ë„ (Â°C)'})
    st.plotly_chart(fig, use_container_width=True)
