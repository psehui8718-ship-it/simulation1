import streamlit as st
import numpy as np
import plotly.express as px

def run():
    st.subheader("🌡 열수력 시뮬레이션 (Thermal-Hydraulics)")
    st.write("냉각재 유량에 따른 연료 온도 분포 변화를 단순 모델로 시뮬레이션합니다.")

    flow_rate = st.slider("냉각재 유량 (kg/s)", 100, 1000, 500, 50)
    power = st.slider("출력 (MW)", 1000, 4000, 2800, 100)

    temp_core = 300 + (power / flow_rate) * 2.5
    st.metric(label="평균 연료 온도 (°C)", value=f"{temp_core:.2f}")

    z = np.linspace(0, 4, 100)  # 노심 높이 (m)
    temp_profile = temp_core + 10 * np.sin(z * np.pi / 4)

    fig = px.line(x=z, y=temp_profile, title="노심 내 온도 분포", labels={'x':'높이 (m)', 'y':'온도 (°C)'})
    st.plotly_chart(fig, use_container_width=True)
